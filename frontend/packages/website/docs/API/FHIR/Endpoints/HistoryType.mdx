---
id: history-type
title: history-type
sidebar_position: 10
---

# History Resource Type

The FHIR [history operation](https://www.hl7.org/fhir/http.html#history) allows you to retrieve the change history for all resources of a specific type. This is done using an HTTP GET request to the history endpoint for the resource type.

## Endpoint

```
GET /w/[tenant]/api/v1/[project]/fhir/r4/[ResourceType]/_history
```

Where `[ResourceType]` is the type of resource (e.g., Patient, Observation).

## Query Parameters

Optional parameters to control the history results:

- `_count` - Number of entries to return (default: server-defined)
- `_since` - Return only changes since this date/time
- `_at` - Return the state as of this date/time

Example: `GET /w/[tenant]/api/v1/[project]/fhir/r4/Patient/_history?_count=20&_since=2025-01-01`

## Response

If the request is successful, the server will respond with a `200 OK` status code and a Bundle of type `history` containing versions of all resources of the specified type.

```
HTTP/1.1 200 OK
Content-Type: application/fhir+json
```

```json
{
  "resourceType": "Bundle",
  "type": "history",
  "total": 5,
  "entry": [
    {
      "fullUrl": "http://api.haste.health/w/[tenant]/api/v1/[project]/fhir/r4/Patient/12345/_history/2",
      "resource": {
        "resourceType": "Patient",
        "id": "12345",
        "meta": {
          "versionId": "2",
          "lastUpdated": "2025-11-26T10:30:00Z"
        },
        "name": [
          {
            "use": "official",
            "family": "Smith",
            "given": ["John"]
          }
        ]
      },
      "request": {
        "method": "PUT",
        "url": "Patient/12345"
      },
      "response": {
        "status": "200"
      }
    },
    {
      "fullUrl": "http://api.haste.health/w/[tenant]/api/v1/[project]/fhir/r4/Patient/67890/_history/1",
      "resource": {
        "resourceType": "Patient",
        "id": "67890",
        "meta": {
          "versionId": "1",
          "lastUpdated": "2025-11-25T14:20:00Z"
        },
        "name": [
          {
            "use": "official",
            "family": "Doe",
            "given": ["Jane"]
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Patient"
      },
      "response": {
        "status": "201"
      }
    }
  ]
}
```

## Error Handling

If there are any issues with the request (e.g., invalid parameters), the server will respond with an appropriate error status code and include an `OperationOutcome` resource in the response body.

```
HTTP/1.1 400 Bad Request
Content-Type: application/fhir+json
```

```json
{
  "resourceType": "OperationOutcome",
  "issue": [
    {
      "severity": "error",
      "code": "invalid",
      "diagnostics": "Invalid _since parameter format"
    }
  ]
}
```

## Example using cURL

Here is an example of how to retrieve the history of all Patient resources using cURL:

```bash
curl -X GET "http://api.haste.health/w/[tenant]/api/v1/[project]/fhir/r4/Patient/_history?_count=20&_since=2025-01-01" \
     -H "Content-Type: application/fhir+json" \
     -H "Authorization: Bearer YOUR_ACCESS_TOKEN"
```

This command sends a GET request to retrieve the last 20 versions of Patient resources changed since January 1, 2025.
