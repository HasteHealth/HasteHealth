---
id: patch
title: patch
sidebar_position: 4
---

# Patch Resource

The FHIR [patch operation](https://www.hl7.org/fhir/http.html#patch) allows you to partially update an existing resource on the FHIR server. This is done using an HTTP PATCH request to the endpoint corresponding to the resource type and ID. FHIR supports both JSON Patch and FHIRPath Patch formats.

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="cli" label="CLI" default>

Patch a Patient resource using the Haste Health CLI:

```bash
haste-health api patch Patient 12345 --file patch.json
```

Where `patch.json` contains JSON Patch operations:

```json
[
  {
    "op": "add",
    "path": "/telecom",
    "value": [
      {
        "system": "phone",
        "value": "555-1234"
      }
    ]
  }
]
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

Patch a Patient resource using the TypeScript client:

```typescript
import { AsynchronousClient } from '@haste-health/client';
import { R4 } from '@haste-health/fhir-types/versions';

// Assuming you have a configured client
const client: AsynchronousClient<{}> = /* ... */;

const patches = [
  {
    op: "add",
    path: "/telecom",
    value: [
      {
        system: "phone",
        value: "555-1234"
      }
    ]
  }
];

const patchedPatient = await client.patch(
  {},
  R4,
  'Patient',
  '12345',
  patches
);

console.log('Patched Patient:', patchedPatient);
```

</TabItem>
<TabItem value="curl" label="cURL">

Patch a Patient resource using cURL with JSON Patch:

```bash
curl -X PATCH "https://api.haste.health/w/[tenant]/api/v1/[project]/fhir/r4/Patient/12345" \
     -H "Content-Type: application/json-patch+json" \
     -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
     -d '[
           {
             "op": "add",
             "path": "/telecom",
             "value": [{"system": "phone", "value": "555-1234"}]
           }
         ]'
```

</TabItem>
</Tabs>

Replace `[tenant]` with your tenant name and `[project]` with your project ID.

## Error Handling

If there are any issues with the request (e.g., resource not found, invalid patch operation), the server will respond with an appropriate error status code and include an `OperationOutcome` resource in the response body.

```
HTTP/1.1 400 Bad Request
Content-Type: application/fhir+json
```

```json
{
  "resourceType": "OperationOutcome",
  "issue": [
    {
      "severity": "error",
      "code": "invalid",
      "diagnostics": "Invalid patch operation: path not found"
    }
  ]
}
```