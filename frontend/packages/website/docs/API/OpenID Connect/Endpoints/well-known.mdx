---
id: well-known
title: well-known
sidebar_position: 0
---

# OpenID Connect Discovery

The [OpenID Connect Discovery endpoint](https://openid.net/specs/openid-connect-discovery-1_0.html) provides metadata about the OpenID Provider's configuration. This endpoint allows clients to dynamically discover information needed to interact with the authorization server.

## Endpoint

```
GET /.well-known/openid-configuration
```

This endpoint returns the OpenID Provider's configuration metadata.

## Response

If the request is successful, the server will respond with a `200 OK` status code and a JSON document containing the provider's metadata:

```
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "issuer": "http://localhost:3000",
  "authorization_endpoint": "http://localhost:3000/oauth2/authorize",
  "token_endpoint": "http://localhost:3000/oauth2/token",
  "userinfo_endpoint": "http://localhost:3000/oauth2/userinfo",
  "jwks_uri": "http://localhost:3000/.well-known/jwks.json",
  "registration_endpoint": "http://localhost:3000/oauth2/register",
  "scopes_supported": [
    "openid",
    "profile",
    "email",
    "address",
    "phone",
    "offline_access",
    "patient/*.read",
    "patient/*.write",
    "user/*.read",
    "user/*.write",
    "system/*.read",
    "system/*.write"
  ],
  "response_types_supported": [
    "code",
    "code id_token",
    "id_token",
    "token id_token"
  ],
  "response_modes_supported": [
    "query",
    "fragment",
    "form_post"
  ],
  "grant_types_supported": [
    "authorization_code",
    "refresh_token",
    "client_credentials",
    "implicit"
  ],
  "subject_types_supported": [
    "public",
    "pairwise"
  ],
  "id_token_signing_alg_values_supported": [
    "RS256",
    "RS384",
    "RS512",
    "ES256",
    "ES384",
    "ES512"
  ],
  "token_endpoint_auth_methods_supported": [
    "client_secret_basic",
    "client_secret_post",
    "client_secret_jwt",
    "private_key_jwt",
    "none"
  ],
  "token_endpoint_auth_signing_alg_values_supported": [
    "RS256",
    "RS384",
    "RS512",
    "ES256",
    "ES384",
    "ES512"
  ],
  "claims_supported": [
    "sub",
    "iss",
    "aud",
    "exp",
    "iat",
    "auth_time",
    "nonce",
    "acr",
    "amr",
    "azp",
    "name",
    "given_name",
    "family_name",
    "middle_name",
    "nickname",
    "preferred_username",
    "profile",
    "picture",
    "website",
    "email",
    "email_verified",
    "gender",
    "birthdate",
    "zoneinfo",
    "locale",
    "phone_number",
    "phone_number_verified",
    "address",
    "updated_at"
  ],
  "code_challenge_methods_supported": [
    "S256",
    "plain"
  ],
  "introspection_endpoint": "http://localhost:3000/oauth2/introspect",
  "revocation_endpoint": "http://localhost:3000/oauth2/revoke",
  "end_session_endpoint": "http://localhost:3000/oauth2/logout",
  "request_parameter_supported": true,
  "request_uri_parameter_supported": false,
  "require_request_uri_registration": false,
  "claims_parameter_supported": true,
  "service_documentation": "http://localhost:3000/docs"
}
```

## Key Metadata Fields

### Required Fields

- `issuer` - The authorization server's identifier (must match the `iss` claim in issued tokens)
- `authorization_endpoint` - URL of the OAuth 2.0 authorization endpoint
- `token_endpoint` - URL of the OAuth 2.0 token endpoint
- `jwks_uri` - URL of the JSON Web Key Set document
- `response_types_supported` - List of supported OAuth 2.0 response types
- `subject_types_supported` - List of subject identifier types supported (`public`, `pairwise`)
- `id_token_signing_alg_values_supported` - List of JWS signing algorithms supported for ID tokens

### Optional Fields

- `userinfo_endpoint` - URL of the UserInfo endpoint
- `registration_endpoint` - URL of the dynamic client registration endpoint
- `scopes_supported` - List of OAuth 2.0 scopes supported
- `response_modes_supported` - List of OAuth 2.0 response modes supported
- `grant_types_supported` - List of OAuth 2.0 grant types supported
- `token_endpoint_auth_methods_supported` - List of client authentication methods supported
- `claims_supported` - List of claim names supported
- `code_challenge_methods_supported` - List of PKCE code challenge methods supported
- `introspection_endpoint` - URL of the token introspection endpoint
- `revocation_endpoint` - URL of the token revocation endpoint
- `end_session_endpoint` - URL of the logout/end session endpoint

## Error Handling

If there are any issues retrieving the configuration, the server will respond with an appropriate error status code:

```
HTTP/1.1 500 Internal Server Error
Content-Type: application/json
```

```json
{
  "error": "server_error",
  "error_description": "Unable to retrieve OpenID configuration"
}
```

## Example using cURL

Here is an example of how to retrieve the OpenID Connect discovery document using cURL:

```bash
curl -X GET "http://localhost:3000/.well-known/openid-configuration" \
     -H "Accept: application/json"
```

This command sends a GET request to retrieve the OpenID Provider's configuration metadata.

## Using the Discovery Document

Clients should use this endpoint to dynamically discover the authorization server's capabilities and endpoint URLs. This enables:

1. **Dynamic configuration** - Clients don't need hardcoded endpoint URLs
2. **Capability discovery** - Clients can check which features are supported
3. **Algorithm negotiation** - Clients can select appropriate signing algorithms
4. **Scope discovery** - Clients can discover available scopes

Example client initialization:

```javascript
// Fetch and parse discovery document
const response = await fetch('http://localhost:3000/.well-known/openid-configuration');
const config = await response.json();

// Use discovered endpoints
const authUrl = `${config.authorization_endpoint}?${params}`;
const tokenUrl = config.token_endpoint;
const jwksUri = config.jwks_uri;
```

## JWKS Endpoint

The `jwks_uri` field points to the JSON Web Key Set endpoint, which provides the public keys used to verify JWT signatures:

```bash
curl -X GET "http://localhost:3000/.well-known/jwks.json" \
     -H "Accept: application/json"
```

Example JWKS response:

```json
{
  "keys": [
    {
      "kty": "RSA",
      "use": "sig",
      "kid": "2023-11-26-key-1",
      "n": "0vx7agoebGcQSuuPiLJXZptN9nndrQmbXEps2aiAFbWhM78LhWx4cbbfAAtVT86zwu1RK7aPFFxuhDR1L6tSoc_BJECPebWKRXjBZCiFV4n3oknjhMstn64tZ_2W-5JsGY4Hc5n9yBXArwl93lqt7_RN5w6Cf0h4QyQ5v-65YGjQR0_FDW2QvzqY368QQMicAtaSqzs8KJZgnYb9c7d0zgdAZHzu6qMQvRL5hajrn1n91CbOpbISD08qNLyrdkt-bFTWhAI4vMQFh6WeZu0fM4lFd2NcRwr3XPksINHaQ-G_xBniIqbw0Ls1jF44-csFCur-kEgU8awapJzKnqDKgw",
      "e": "AQAB",
      "alg": "RS256"
    }
  ]
}
```
